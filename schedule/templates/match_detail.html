{% extends 'base.html' %}
{% load static %}
{% block content %}

<div class="max-w-5xl mx-auto my-12 px-6">

  
    <h2 class="text-5xl font-bold text-gray-900 text-center my-8">
      {{ match.home_team }}
      <span class="mx-3">vs</span>
      {{ match.away_team }}
    </h2>

      <div class="flex flex-col justify-center items-center mb-4 mt-2">
              {% if match.category_image_url %}
        <img src="{{ match.category_image_url }}" class="h-10 object-contain my-2" alt="{{ match.category }}">
      {% endif %}
        <span class="text-sm text-center text-gray-500 font-medium">{{ match.get_category_display }}</span>
      </div>
  
  <div class="flex items-center justify-center gap-4 my-4">
    
    <img src="https://flagcdn.com/w160/{{ match.home_code }}.png"
         class="h-10 border-2 border-gray-400 object-cover" alt="{{ match.home_team }}">

    <div class="text-center mt-2 text-4xl font-extrabold text-gray-900 mb-4 justify-center items-center">
    {{ match.home_score|default:"0" }} <span class="text-red-600">:</span> {{ match.away_score|default:"0" }}
    </div>

    <img src="https://flagcdn.com/w160/{{ match.away_code }}.png"
         class="h-10 border-2 border-gray-400 object-cover" alt="{{ match.away_team }}">
  </div>

  <div class="text-center text-gray-700 mb-8">
    <p class="text-lg">{{ match.match_date|date:"l, d M Y" }}</p>
    <p>{{ match.location }}</p>
    <p class="flex items-center justify-center gap-2 mt-2">


    </p>
  </div>


<div class="bg-white/70 backdrop-blur-md rounded-xl p-6 mb-10">
    <h3 class="text-xl font-semibold mb-6 text-center text-gray-800">Statistik Pertandingan</h3>

    <div class="space-y-6">
      
      {# MENGGANTI LOOP LAMA: for stat, home, away in stats #}
      {% for stat_data in stats %} 
        {% include "partials/stat_bar.html" with stat_data=stat_data %}
      {% endfor %}

    </div>
</div>


  {% if match.lineup_image_url %}
    <div class="mt-10 text-center">
      <h3 class="text-xl font-semibold mb-3 text-gray-800">Lineup</h3>
      <img src="{{ match.lineup_image_url }}" alt="Lineup" class="mx-auto max-w-md rounded-lg shadow">
    </div>
  {% endif %}

  {% if match.lineup %}
    <div class="mt-6 bg-white/70 p-4 rounded-lg shadow">
      <h3 class="text-lg font-semibold mb-2 text-gray-800">Susunan Pemain</h3>
      <p class="text-gray-700 whitespace-pre-line">{{ match.lineup }}</p>
    </div>
  {% endif %}

</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
    // Memberi sedikit jeda agar browser sempat merender halaman dengan lebar 0
    setTimeout(() => {
        const statBars = document.querySelectorAll('.stat-bar');
        
        statBars.forEach(bar => {
            const targetWidth = bar.dataset.width; // Ambil persentase dari data-width
            if (targetWidth) {
                // Terapkan lebar sebenarnya. CSS transition akan menangani animasi
                bar.style.width = `${targetWidth}%`;
            }
        });
    }, 100); // Jeda 100ms
});
</script>

{% endblock %}
