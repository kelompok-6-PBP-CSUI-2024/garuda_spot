{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="bg-white w-full min-h-screen mt-14 mb-16">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 space-y-6">

    <!-- Header -->
    <div>
      <h1 class="text-3xl font-bold text-gray-900 mb-2">
        Latest Garuda Spot Merchandise
      </h1>
      <p class="text-gray-500">Stay updated with our official gear and accessories</p>
    </div>

  <!-- Tabs -->
<div class="bg-white rounded-xl border border-gray-200 p-4 shadow-sm">
  {% with active=request.GET.filter|default:'all' %}
  <nav class="overflow-x-auto">
    <ul class="flex items-center gap-10 sm:gap-16 whitespace-nowrap">
      <li>
        <a href="?filter=all"
           class="inline-flex items-center px-5 py-2.5 rounded-xl text-base sm:text-lg font-semibold transition-colors
                  border {% if active == 'all' %} bg-[#e11d2a] text-white border-[#e11d2a] shadow-sm {% else %} bg-white text-slate-900 border-slate-300 hover:bg-slate-50 {% endif %}">
          All Merch
        </a>
      </li>

      <li>
        <a href="?filter=keychain"
           class="inline-flex items-center px-5 py-2.5 rounded-xl text-base sm:text-lg font-semibold transition-colors
                  border {% if active == 'keychain' %} bg-[#e11d2a] text-white border-[#e11d2a] shadow-sm {% else %} bg-white text-slate-900 border-slate-300 hover:bg-slate-50 {% endif %}">
          Keychain
        </a>
      </li>

      <li>
        <a href="?filter=jersey"
           class="inline-flex items-center px-5 py-2.5 rounded-xl text-base sm:text-lg font-semibold transition-colors
                  border {% if active == 'jersey' %} bg-[#e11d2a] text-white border-[#e11d2a] shadow-sm {% else %} bg-white text-slate-900 border-slate-300 hover:bg-slate-50 {% endif %}">
          Jersey
        </a>
      </li>

      <li>
        <a href="?filter=jacket"
           class="inline-flex items-center px-5 py-2.5 rounded-xl text-base sm:text-lg font-semibold transition-colors
                  border {% if active == 'jacket' %} bg-[#e11d2a] text-white border-[#e11d2a] shadow-sm {% else %} bg-white text-slate-900 border-slate-300 hover:bg-slate-50 {% endif %}">
          Jacket
        </a>
      </li>

      <li>
        <a href="?filter=hoodie"
           class="inline-flex items-center px-5 py-2.5 rounded-xl text-base sm:text-lg font-semibold transition-colors
                  border {% if active == 'hoodie' %} bg-[#e11d2a] text-white border-[#e11d2a] shadow-sm {% else %} bg-white text-slate-900 border-slate-300 hover:bg-slate-50 {% endif %}">
          Hoodie
        </a>
      </li>

      <li>
        <a href="?filter=cap"
           class="inline-flex items-center px-5 py-2.5 rounded-xl text-base sm:text-lg font-semibold transition-colors
                  border {% if active == 'cap' %} bg-[#e11d2a] text-white border-[#e11d2a] shadow-sm {% else %} bg-white text-slate-900 border-slate-300 hover:bg-slate-50 {% endif %}">
          Cap
        </a>
      </li>

      <li>
        <a href="?filter=scarf"
           class="inline-flex items-center px-5 py-2.5 rounded-xl text-base sm:text-lg font-semibold transition-colors
                  border {% if active == 'scarf' %} bg-[#e11d2a] text-white border-[#e11d2a] shadow-sm {% else %} bg-white text-slate-900 border-slate-300 hover:bg-slate-50 {% endif %}">
          Scarf
        </a>
      </li>
    </ul>
  </nav>
  {% endwith %}
</div>

    <!-- Grid -->
    {% if products %}
      <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
        {% for item in products %}
          <div class="bg-white border border-gray-200 rounded-2xl overflow-hidden shadow-sm hover:shadow-md transition">
            <!-- image -->
            <div class="aspect-[16/10] bg-gray-50">
              {% if item.image_url %}
                <img src="{{ item.image_url }}" alt="{{ item.name }}" class="w-full h-full object-cover" />
              {% else %}
                <img src="{% static 'img/no-product.png' %}" alt="No image" class="w-full h-full object-contain p-6" />
              {% endif %}
            </div>

            <!-- body -->
            <div class="p-4">
              <div class="flex items-start justify-between">
                <h3 class="text-lg font-semibold text-gray-900 truncate">{{ item.name }}</h3>
                {% if item.is_featured %}
                  <span class="ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 border border-yellow-200">
                    Featured
                  </span>
                {% endif %}
              </div>

              {% if item.description %}
                <p class="mt-2 text-sm text-gray-600">
                  {{ item.description|striptags|truncatechars:140 }}
                </p>
              {% endif %}

              <div class="mt-4 flex items-center space-x-2">
                <a href="{% url 'merch:detail' item.id %}"
                   class="px-3 py-1.5 text-sm rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-50">
                  Detail
                </a>

                {% if request.user.is_authenticated and item.owner_id == request.user.id %}
                  <a href="{% url 'merch:edit' item.id %}"
                     class="px-3 py-1.5 text-sm rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-50">
                    Edit
                  </a>
                  <form action="{% url 'merch:delete' item.id %}" method="post" class="inline">
                    {% csrf_token %}
                    <button type="submit"
                            class="px-3 py-1.5 text-sm rounded-lg bg-red-600 text-white hover:bg-red-700">
                      Delete
                    </button>
                  </form>
                {% endif %}
              </div>
            </div>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <!-- empty state -->
      <div class="border border-dashed border-gray-300 rounded-2xl p-12 text-center">
        <h3 class="text-lg font-semibold text-gray-900">Belum ada merchandise yang tersedia</h3>
      </div>
    {% endif %}
  </div>
</div>
{% endblock content %}
